<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Classroom English èªå­—å¤§æŒ‘æˆ°</title>
  <style>
    :root {
      --bg: #0f172a; --card: #1e293b; --accent: #38bdf8;
      --good: #4ade80; --bad: #f87171; --text: #f1f5f9;
    }
    body {
      margin: 0; font-family: system-ui, sans-serif;
      background: var(--bg); color: var(--text);
      display: flex; flex-direction: column; align-items: center; min-height: 100vh;
    }
    .container { width: 100%; max-width: 600px; padding: 20px; box-sizing: border-box; }
    header { text-align: center; margin-bottom: 20px; }
    .card {
      background: var(--card); border-radius: 20px; padding: 25px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3); text-align: center;
    }
    .prompt-big { font-size: 2.5rem; font-weight: 800; margin-bottom: 10px; min-height: 80px; display: flex; align-items: center; justify-content: center; }
    .prompt-sub { color: #94a3b8; margin-bottom: 20px; }
    
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .btn-opt {
      background: #334155; border: 2px solid transparent; border-radius: 15px;
      padding: 20px 10px; font-size: 1.1rem; font-weight: 600; color: white;
      cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center;
    }
    .btn-opt:active { transform: scale(0.95); }
    .correct { background: var(--good) !important; color: #064e3b; }
    .wrong { background: var(--bad) !important; color: #7f1d1d; }

    .menu { margin-top: 20px; display: flex; gap: 10px; justify-content: center; }
    select, button.main {
      padding: 12px; border-radius: 10px; border: none; background: var(--accent);
      color: #0c4a6e; font-weight: bold; font-size: 1rem;
    }
    .stats { margin-top: 20px; font-size: 0.9rem; color: #94a3b8; }
    #progressBar { width: 100%; height: 8px; background: #334155; border-radius: 4px; margin-bottom: 20px; overflow: hidden; }
    #progressFill { width: 0%; height: 100%; background: var(--accent); transition: 0.3s; }
  </style>
</head>
<body>

<div class="container">
  <header>
    <h2 style="margin:0">Classroom English</h2>
    <div class="stats">æ­£ç¢º: <span id="score">0</span> | é¡Œæ•¸: <span id="total">0</span></div>
  </header>

  <div id="progressBar"><div id="progressFill"></div></div>

  <div class="card">
    <div id="promptBig" class="prompt-big">Ready?</div>
    <div id="promptSub" class="prompt-sub">é»æ“Šé–‹å§‹ä¾†æŒ‘æˆ°å§ï¼</div>
    
    <div id="gameArea" class="grid">
      </div>
  </div>

  <div class="menu">
    <select id="gameMode">
      <option value="en2zh">è‹± â” ä¸­</option>
      <option value="zh2en">ä¸­ â” è‹±</option>
    </select>
    <button class="main" onclick="startGame()">é–‹å§‹/é‡ä¾†</button>
  </div>
</div>

<script>
const BANK = [
  {en:"Stand up.", zh:"èµ·ç«‹ã€‚"}, {en:"Sit down.", zh:"åä¸‹ã€‚"},
  {en:"Listen!", zh:"è½ï¼"}, {en:"Look at me.", zh:"çœ‹æˆ‘ã€‚"},
  {en:"Raise your hand.", zh:"èˆ‰æ‰‹ã€‚"}, {en:"Line up.", zh:"æ’éšŠã€‚"},
  {en:"Open your book.", zh:"æ‰“é–‹èª²æœ¬ã€‚"}, {en:"Close your book.", zh:"åˆä¸Šèª²æœ¬ã€‚"},
  {en:"Time's up.", zh:"æ™‚é–“åˆ°ã€‚"}, {en:"Are you ready?", zh:"æº–å‚™å¥½äº†å—ï¼Ÿ"}
];

let score = 0, total = 0, currentIdx = 0, roundPool = [];

function startGame() {
  score = 0; total = 0; currentIdx = 0;
  roundPool = [...BANK].sort(() => Math.random() - 0.5);
  updateStats();
  showQuestion();
}

function showQuestion() {
  if (currentIdx >= roundPool.length) {
    document.getElementById('promptBig').textContent = "ğŸ‰ å®Œæˆï¼";
    document.getElementById('gameArea').innerHTML = "";
    return;
  }

  const item = roundPool[currentIdx];
  const mode = document.getElementById('gameMode').value;
  const isEn = mode === 'en2zh';
  
  document.getElementById('promptBig').textContent = isEn ? item.en : item.zh;
  document.getElementById('progressFill').style.width = ((currentIdx / roundPool.length) * 100) + "%";
  
  // èªéŸ³æœ—è®€
  const synth = window.speechSynthesis;
  const utter = new SpeechSynthesisUtterance(item.en);
  utter.lang = 'en-US';
  synth.speak(utter);

  // ç”¢ç”Ÿé¸é …
  let options = [isEn ? item.zh : item.en];
  while(options.length < 4) {
    let rand = BANK[Math.floor(Math.random()*BANK.length)];
    let val = isEn ? rand.zh : rand.en;
    if(!options.includes(val)) options.push(val);
  }
  options.sort(() => Math.random() - 0.5);

  const area = document.getElementById('gameArea');
  area.innerHTML = "";
  options.forEach(opt => {
    const btn = document.createElement('button');
    btn.className = 'btn-opt';
    btn.textContent = opt;
    btn.onclick = () => checkAns(btn, opt, isEn ? item.zh : item.en);
    area.appendChild(btn);
  });
}

function checkAns(btn, selected, correct) {
  total++;
  if (selected === correct) {
    score++;
    btn.classList.add('correct');
    setTimeout(() => { currentIdx++; showQuestion(); }, 800);
  } else {
    btn.classList.add('wrong');
    // æŠ–å‹•ç‰¹æ•ˆ
    document.querySelector('.card').style.animation = "shake 0.3s";
    setTimeout(() => { document.querySelector('.card').style.animation = ""; }, 300);
  }
  updateStats();
}

function updateStats() {
  document.getElementById('score').textContent = score;
  document.getElementById('total').textContent = total;
}
</script>
</body>
</html>